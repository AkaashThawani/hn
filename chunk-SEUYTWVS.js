import{g as L,h as Q,o as x,p as $,q as z,r as F,s as H,t as U,u as q,v as G,w as J,x as K,y as N}from"./chunk-YY4LIHYW.js";import{Bb as E,Ca as _,Da as C,Ha as m,Ia as r,Ib as j,Ja as d,Ka as p,Kb as O,Lb as B,Oa as D,P as y,Pa as T,Q as b,Ra as k,Sb as A,Ta as M,Ua as c,Ya as I,Za as P,_a as R,dc as W,ga as o,gb as s,hb as V,ib as u,jb as w,ka as g,oa as S,sa as h}from"./chunk-MERWCCRE.js";function X(n,l){if(n&1&&(r(0,"div",16)(1,"button",18),s(2),d()()),n&2){let t=c(2).$implicit;o(),m("routerLink",w("/story/",t.id))("disabled",(t==null||t.data==null?null:t.data.descendants)==0),o(),u(" ",t==null||t.data==null?null:t.data.descendants," comments ")}}function Y(n,l){if(n&1){let t=k();r(0,"div",8)(1,"div")(2,"span",9)(3,"div",10),s(4),d(),r(5,"div",11)(6,"div",12),s(7),d()()(),r(8,"div",13),M("click",function(){y(t);let e=c().$implicit,a=c(2);return b(a.open(e==null?null:e.data.url))}),s(9),d(),r(10,"div",14)(11,"button",15),s(12),d(),_(13,X,3,4,"div",16),r(14,"div",17),s(15),d()()()()}if(n&2){let t=c().$implicit;o(4),u(" ",t.data==null?null:t.data.title," "),o(3),V(t==null?null:t.data.time),o(2),u(" ",t.data.url," "),o(2),m("routerLink",w("/user/",t==null||t.data==null?null:t.data.by)),o(),u(" ",t.data.by.trim()," "),o(),C(t.data.type!="job"?13:-1),o(2),u(" ",t==null||t.data==null?null:t.data.score," ")}}function Z(n,l){n&1&&(p(0,"div",19),r(1,"div"),p(2,"div",19)(3,"div",19),d(),p(4,"div",19))}function tt(n,l){if(n&1&&(r(0,"td",7),_(1,Y,16,8,"div",8)(2,Z,5,0),d()),n&2){let t=l.$implicit;o(),C((t==null||t.data==null?null:t.data.length)!=0?1:2)}}function et(n,l){n&1&&p(0,"tr",20)}function it(n,l){if(n&1&&(r(0,"table",2),D(1,4),h(2,tt,3,1,"td",5),T(),h(3,et,1,0,"tr",6),d()),n&2){let t=c();m("dataSource",t.ds)("trackBy",t.tableTrackBy),o(3),m("matRowDefColumns",t.displayedColumns)}}var gt=(()=>{let l=class l{constructor(i,e,a){this.apiService=i,this.activatedRoute=e,this.router=a,this.topStories=[],this.paginatedData=[],this.paginated=[],this.ds=new K([{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]}]),this.displayedColumns=["story"],this.viewMode="",this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.activatedRoute.params.subscribe(i=>{this.viewMode=i.id}),this.getAPI(this.viewMode)}ngAfterViewInit(){this.ds.paginator=this.paginator}onPageChange(i){this.paginatedData=this.topStories.slice(i.pageIndex+10,(i.pageIndex+2)*10),this.getStoryData(this.paginatedData)}getAPI(i){this.apiService.modeType(i).subscribe(e=>{e=e.map((f,v)=>({id:f,index:v+1,data:[]})),this.topStories=e;var a=this.topStories.slice(0,20);this.getStoryData(a)})}getStoryData(i){i.forEach(e=>{this.getStoriesByIDs(e.id)})}tableTrackBy(i,e){return e.id}getStoriesByIDs(i){this.apiService.getStoryById(i).subscribe(e=>{this.topStories.forEach(a=>{a.id==i&&(e.time=this.getTime(e),a.data=e)}),this.ds.data=this.topStories})}getTime(i){var e=new Date().getTime(),a=new Date(i.time*1e3).getTime();return e-a<=36e5?new Date(e-a).getUTCMinutes()+" minutes":new Date(e-a).getUTCHours()+" hours"}open(i){window.open(i,"_blank")}};l.\u0275fac=function(e){return new(e||l)(g(W),g(j),g(O))},l.\u0275cmp=S({type:l,selectors:[["app-multi-mode-view"]],viewQuery:function(e,a){if(e&1&&I(x,5),e&2){let f;P(f=R())&&(a.paginator=f.first)}},decls:4,vars:3,consts:[[1,"sticky"],["appearance","outlined",1,"page","flex","flex-col","flex-nowrap","items-stretch","justify-start"],["mat-table","",1,"w100",3,"dataSource","trackBy"],["paginator","","showFirstLastButtons","true","aria-label","Select page",3,"page","length","pageSize"],["matColumnDef","story"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell",""],[1,"story"],[1,"story-title","flex"],[1,"flex-basis-[85%]"],[1,"story-info","flex-basis-[15%]"],[1,"tr","w100"],["target","_blank",1,"story-url","cursor-pointer",3,"click"],[1,"flex","flex-row","flex-nowrap","items-center","justify-between","gap-[25px]"],["mat-flat-button","",1,"flex-basis-[35%]","text-left","justify-start",3,"routerLink"],[1,"m-20c","flex-basis-[20%]","cursor-pointer","flex","flex-row","flex-wrap","items-center","justify-between"],[1,"m-20","flex-basis-[15%]"],["mat-flat-button","",1,"bg-none",3,"disabled","routerLink"],[1,"skeleton","skeleton-text"],["mat-row",""]],template:function(e,a){e&1&&(p(0,"app-heading",0),r(1,"mat-card",1),_(2,it,4,3,"table",2),r(3,"mat-paginator",3),M("page",function(v){return a.onPageChange(v)}),d()()),e&2&&(o(2),C(a.ds.data.length>0?2:-1),o(),m("length",a.topStories.length)("pageSize",10))},dependencies:[E,A,B,N,Q,L,J,z,H,F,q,U,G,$,x],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.disabled-text[_ngcontent-%COMP%]{color:#00000042}.bg-none[_ngcontent-%COMP%]{background:none!important}.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0!important}.justify-content-start[_ngcontent-%COMP%]{justify-content:flex-start!important}.mat-column-upvote[_ngcontent-%COMP%]{width:15%}.tr[_ngcontent-%COMP%]{text-align:right!important}.w100[_ngcontent-%COMP%]{width:100%}"]});let n=l;return n})();export{gt as MultiModeViewComponent};
