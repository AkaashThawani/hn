import{a as Q,b as z}from"./chunk-BKTW327N.js";import{a as G,b as J,h as g,i as K,j as N,k as W,l as X,m as Y,n as Z,o as tt,p as et,q as it,r as nt}from"./chunk-6X3DSASR.js";import{Aa as T,Bc as at,Ca as I,Da as V,Ea as m,Fa as r,Ga as l,Ha as c,K as x,L as M,La as O,Ma as E,Oa as v,Qa as y,Ra as p,Va as R,Wa as B,Xa as j,_ as d,ca as _,db as s,eb as L,ec as $,fb as u,ga as S,gb as b,gc as H,hc as U,ib as A,ka as C,la as D,oc as q,sa as k,ta as P,ya as h,za as w,zb as F}from"./chunk-T4DG6L2Z.js";var rt=()=>[U,N,X,W,Z,Y,tt,g],lt=()=>[1,2,3,4,5,6,7,8,9,10];function dt(i,o){if(i&1&&(r(0,"button",18),s(1),l()),i&2){let t=p().$implicit;m("routerLink",b("/story/",t.id))("disabled",(t==null||t.data==null?null:t.data.descendants)==0),d(),u(" ",t==null||t.data==null?null:t.data.descendants," comments ")}}function st(i,o){if(i&1){let t=v();r(0,"td",7)(1,"div",8)(2,"div")(3,"span",9)(4,"div",10),s(5),l(),r(6,"div",11)(7,"div",12),s(8),l()()(),r(9,"div",13),y("click",function(){let e=x(t).$implicit,a=p(3);return M(a.open(e==null?null:e.data.url))}),s(10),l(),r(11,"div",14)(12,"div",15)(13,"button",16),s(14),l()(),r(15,"div",17),h(16,dt,2,4,"button",18),l(),r(17,"div",19)(18,"span"),s(19),l()()()()()()}if(i&2){let t=o.$implicit;d(5),u(" ",t.data==null?null:t.data.title," "),d(3),L(t==null?null:t.data.time),d(2),u(" ",t.data.url," "),d(3),m("routerLink",b("/user/",t==null||t.data==null?null:t.data.by)),d(),u(" ",t.data.by.trim()," "),d(2),w(t.data.type!="job"?16:-1),d(3),u("",t==null||t.data==null?null:t.data.score," points")}}function mt(i,o){i&1&&c(0,"tr",20)}function ct(i,o){if(i&1&&(r(0,"table",2),O(1,4),C(2,st,20,8,"td",5),E(),C(3,mt,1,0,"tr",6),l()),i&2){let t=p(2);m("dataSource",t.ds)("trackBy",t.tableTrackBy),d(3),m("matRowDefColumns",t.displayedColumns)}}function pt(i,o){if(i&1){let t=v();h(0,ct,4,3,"table",2),r(1,"mat-paginator",3),y("page",function(e){x(t);let a=p();return M(a.onPageChange(e))}),l()}if(i&2){let t=p();w(t.ds.data.length>0?0:-1),d(),m("length",t.topStories.length)("pageSize",10)}}function ut(i,o){i&1&&c(0,"mat-progress-bar",21)}function ft(i,o){i&1&&(r(0,"div",23),c(1,"div",24)(2,"div",25),r(3,"div",26),c(4,"div",27)(5,"div",28),l()())}function _t(i,o){i&1&&(r(0,"div",22),I(1,ft,6,0,"div",23,T),l()),i&2&&(d(),V(A(0,lt)))}var It=(()=>{let o=class o{constructor(n,e,a){this.apiService=n,this.activatedRoute=e,this.router=a,this.topStories=[],this.paginatedData=[],this.paginated=[],this.ds=new it([{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]},{data:[]}]),this.displayedColumns=["story"],this.viewMode="",this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.activatedRoute.params.subscribe(n=>{this.viewMode=n.id}),this.getAPI(this.viewMode)}ngAfterViewInit(){this.ds.paginator=this.paginator}onPageChange(n){this.paginatedData=this.topStories.slice(n.pageIndex+10,(n.pageIndex+2)*10),this.getStoryData(this.paginatedData)}getAPI(n){this.apiService.modeType(n).subscribe(e=>{e=e.map((f,ot)=>({id:f,index:ot+1,data:[]})),this.topStories=e;var a=this.topStories.slice(0,20);this.getStoryData(a)})}getStoryData(n){n.forEach(e=>{this.getStoriesByIDs(e.id)})}tableTrackBy(n,e){return e.id}getStoriesByIDs(n){this.apiService.getStoryById(n).subscribe(e=>{this.topStories.forEach(a=>{a.id==n&&(e.time=this.getTime(e),a.data=e)}),this.ds.data=this.topStories})}getTime(n){var e=new Date().getTime(),a=new Date(n.time*1e3).getTime();return e-a<=36e5?new Date(e-a).getUTCMinutes()+" minutes":new Date(e-a).getUTCHours()+" hours"}open(n){window.open(n,"_blank")}};o.\u0275fac=function(e){return new(e||o)(_(at),_($),_(H))},o.\u0275cmp=S({type:o,selectors:[["app-multi-mode-view"]],viewQuery:function(e,a){if(e&1&&R(g,5),e&2){let f;B(f=j())&&(a.paginator=f.first)}},decls:7,vars:0,consts:[[1,"sticky"],["appearance","outlined",1,"page","flex","flex-col","flex-nowrap","items-stretch","justify-start"],["mat-table","",1,"w100",3,"dataSource","trackBy"],["paginator","","showFirstLastButtons","true","aria-label","Select page",3,"page","length","pageSize"],["matColumnDef","story"],["mat-cell","",4,"matCellDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-cell",""],[1,"story"],[1,"story-title","flex"],[1,"flex-basis-[85%]"],[1,"story-info","flex-basis-[15%]"],[1,"tr","w100"],["target","_blank",1,"story-url","cursor-pointer",3,"click"],[1,"story-meta","flex","w-full","items-center","pt-2"],[1,"w-2/5"],["mat-flat-button","",1,"text-left","justify-start","p-0",3,"routerLink"],[1,"w-3/12","text-center"],["mat-flat-button","",1,"bg-none",3,"disabled","routerLink"],[1,"flex-grow","text-right","pr-4"],["mat-row",""],["mode","indeterminate"],[1,"skeleton-container"],[1,"skeleton-row"],[1,"skeleton","skeleton-text","w-5/6"],[1,"skeleton","skeleton-text","w-full","mt-2"],[1,"flex","mt-4"],[1,"skeleton","skeleton-text","w-1/4"],[1,"skeleton","skeleton-text","w-1/4","ml-4"]],template:function(e,a){e&1&&(c(0,"app-heading",0),r(1,"mat-card",1),D(2,pt,2,3)(3,ut,1,0)(4,_t,3,1),k(5,2,rt,3,4),P(),l())},dependencies:[F,q,nt,J,G,et,K,z,Q],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.disabled-text[_ngcontent-%COMP%]{color:#00000042}.bg-none[_ngcontent-%COMP%]{background:none!important}.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0!important}.justify-content-start[_ngcontent-%COMP%]{justify-content:flex-start!important}.mat-column-upvote[_ngcontent-%COMP%]{width:15%}.tr[_ngcontent-%COMP%]{text-align:right!important}.w100[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .mat-mdc-card{display:flex;flex-direction:column;flex-grow:1}[_nghost-%COMP%]     .mat-mdc-row{height:6rem;border-bottom:1px solid #e5e7eb}.skeleton-container[_ngcontent-%COMP%]{padding:0 1.5rem}.skeleton-row[_ngcontent-%COMP%]{height:6rem;display:flex;flex-direction:column;justify-content:center;border-bottom:1px solid #e5e7eb}.skeleton[_ngcontent-%COMP%]{background-color:#e5e7eb;border-radius:.25rem;animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}.skeleton-text[_ngcontent-%COMP%]{height:.875rem}@keyframes _ngcontent-%COMP%_pulse{50%{opacity:.5}}"]});let i=o;return i})();export{It as MultiModeViewComponent};
