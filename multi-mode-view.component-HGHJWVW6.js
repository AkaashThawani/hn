import{a as z,b as H,c as G,d as J,j as x,k as K}from"./chunk-TY7MSYTB.js";import{a as O,b as Q,h as N,k as U,l as q}from"./chunk-LPC547R5.js";import{a as W}from"./chunk-WMUZ6ZTV.js";import{$a as k,G as M,Ga as C,Ha as D,Ja as T,K as y,L as S,Ra as E,Sa as b,Y as a,_ as v,bb as F,ca as c,cb as L,cc as B,dc as j,ea as d,fa as o,ga as r,gc as X,ha as u,ka as I,mb as P,na as _,oa as p,ob as V,pb as R,qb as A,ra as h,ua as m,wa as s,za as w}from"./chunk-ZX6U5F3B.js";function Z(l,t){if(l&1){let e=I();o(0,"div")(1,"span",12),m(2),r(),o(3,"div",13),_("click",function(){y(e);let n=p().index,f=p();return S(f.open(f.paginated[n]==null?null:f.paginated[n].url))}),m(4),r()()}if(l&2){let e=p().index,i=p();a(2),s(" ",i.paginated[e]==null?null:i.paginated[e].title," "),a(2),s("",i.paginated[e]==null?null:i.paginated[e].url," ")}}function $(l,t){if(l&1&&(o(0,"div",14)(1,"div",15)(2,"div")(3,"mat-icon"),m(4,"mode_comment"),r()(),o(5,"div"),m(6),r()()()),l&2){let e=p().index,i=p();a(1),h("routerLink","/story/",i.paginated[e]==null?null:i.paginated[e].id,""),a(5),s("",i.paginated[e]==null?null:i.paginated[e].descendants," ")}}function ee(l,t){l&1&&(o(0,"div"),u(1,"div",16),o(2,"div"),u(3,"div",16)(4,"div",16),r(),o(5,"div"),u(6,"div",16),r()())}function te(l,t){l&1&&u(0,"mat-divider")}function ie(l,t){if(l&1&&(o(0,"mat-accordion")(1,"mat-expansion-panel",4)(2,"div",5)(3,"div",6),m(4),r(),o(5,"div",7),c(6,Z,5,2,"div",8),o(7,"div")(8,"div",9)(9,"button",10),m(10),r(),o(11,"a"),m(12),r()()()(),c(13,$,7,2,"div",11),r(),c(14,ee,7,0,"div",8),r(),c(15,te,1,0,"mat-divider",8),r()),l&2){let e=t.index,i=t.last,n=p();a(4),s(" ",n.paginated[e]==null?null:n.paginated[e].score," "),a(1),d("fxFlex",(n.paginated[e]==null?null:n.paginated[e].type)!="job"?70:85),a(1),d("ngIf",n.paginated[e]==null?null:n.paginated[e].title),a(3),h("routerLink","/user/",n.paginated[e]==null?null:n.paginated[e].by,""),a(1),s(" ",n.paginated[e]==null?null:n.paginated[e].by.trim()," "),a(2),s(" ",n.getTime(n.paginated[e]==null?null:n.paginated[e].time)," "),a(1),d("ngIf",(n.paginated[e]==null?null:n.paginated[e].type)!="job"),a(1),d("ngIf",!(n.paginated[e]!=null&&n.paginated[e].title)),a(1),d("ngIf",!i)}}var g=class{constructor(t,e,i){this.apiService=t,this.activatedRoute=e,this.router=i,this.topStories=[],this.paginatedData=[],this.paginated=[],this.viewMode="",this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.activatedRoute.params.subscribe(t=>{console.log(t),this.viewMode=t.id}),this.getAPI(this.viewMode),console.log("act",this.activatedRoute)}onPageChange(t){this.paginatedData=this.topStories.slice(t.pageIndex*20,(t.pageIndex+1)*20),this.paginated=[],this.getStoryData()}getAPI(t){this.apiService.modeType(t).subscribe(e=>{e=e.map((i,n)=>({id:i,index:n+1})),this.topStories=e,this.paginatedData=this.topStories.slice(0,20),this.getStoryData()})}getStoriesByIDs(t){this.apiService.getStoryById(t).subscribe(e=>{this.paginated.push(e)})}getStoryData(){this.paginatedData.forEach(t=>{this.getStoriesByIDs(t.id)})}getTime(t){var e=new Date().getTime(),i=new Date(t*1e3).getTime();return e-i<=36e5?new Date(e-i).getUTCMinutes()+" minutes":new Date(e-i).getUTCHours()+" hours"}open(t){window.open(t,"_blank")}},Y=g;(()=>{g.\u0275fac=function(e){return new(e||g)(v(X),v(k),v(F))}})(),(()=>{g.\u0275cmp=M({type:g,selectors:[["app-multi-mode-view"]],viewQuery:function(e,i){if(e&1&&D(x,5),e&2){let n;C(n=T())&&(i.paginator=n.first)}},standalone:!0,features:[w],decls:4,vars:3,consts:[[1,"sticky"],["fxLayout","column nowrap","fxLayoutAlign","start stretch",1,"page"],[4,"ngFor","ngForOf"],["paginator","","showFirstLastButtons","true","aria-label","Select page",3,"length","pageSize","page"],["hideToggle","","expanded","true"],[1,"row-center"],["fxFlex","15",1,"m-20"],[1,"story",3,"fxFlex"],[4,"ngIf"],[1,"story-info"],["mat-flat-button","",1,"text-left",3,"routerLink"],["class","m-20c cursor-pointer","fxFlex","15",4,"ngIf"],[1,"story-title"],["target","_blank",1,"story-url","cursor-pointer",3,"click"],["fxFlex","15",1,"m-20c","cursor-pointer"],[3,"routerLink"],[1,"skeleton","skeleton-text"]],template:function(e,i){e&1&&(u(0,"app-heading",0),o(1,"mat-card",1),c(2,ie,16,9,"mat-accordion",2),o(3,"mat-paginator",3),_("page",function(f){return i.onPageChange(f)}),r()()),e&2&&(a(2),d("ngForOf",i.paginatedData),a(1),d("length",i.topStories.length)("pageSize",20))},dependencies:[E,b,H,z,L,j,B,q,U,N,Q,O,W,J,G,K,x,A,P,R,V],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0!important}"]})})();export{Y as MultiModeViewComponent};
