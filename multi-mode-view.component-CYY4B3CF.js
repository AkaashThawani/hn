import{a as z,b as H,c as G,d as J,j as x,k as K}from"./chunk-NS2OMV7W.js";import{a as j,b as Q,h as N,k as U,l as q}from"./chunk-5UWJZI5H.js";import{a as W}from"./chunk-LLKAV3SA.js";import{$ as v,Ba as w,G as M,Ia as C,Ja as D,K as y,L as S,La as T,Ta as E,Ua as b,Z as a,bb as k,da as c,db as F,eb as L,ec as B,fa as m,fc as O,ga as o,ha as r,ia as u,ic as X,la as I,oa as _,ob as P,pa as d,qb as V,rb as R,sb as A,ta as h,wa as p,ya as s}from"./chunk-7GNFALUO.js";function Z(l,e){if(l&1){let t=I();o(0,"div")(1,"span",12),p(2),r(),o(3,"div",13),_("click",function(){y(t);let n=d().index,f=d();return S(f.open(f.paginated[n]==null?null:f.paginated[n].url))}),p(4),r()()}if(l&2){let t=d().index,i=d();a(2),s(" ",i.paginated[t]==null?null:i.paginated[t].title," "),a(2),s("",i.paginated[t]==null?null:i.paginated[t].url," ")}}function $(l,e){if(l&1&&(o(0,"div",14)(1,"div",15)(2,"div")(3,"mat-icon"),p(4,"mode_comment"),r()(),o(5,"div"),p(6),r()()()),l&2){let t=d().index,i=d();a(1),h("routerLink","/story/",i.paginated[t]==null?null:i.paginated[t].id,""),a(5),s("",i.paginated[t]==null?null:i.paginated[t].descendants," ")}}function tt(l,e){l&1&&(o(0,"div"),u(1,"div",16),o(2,"div"),u(3,"div",16)(4,"div",16),r(),o(5,"div"),u(6,"div",16),r()())}function et(l,e){l&1&&u(0,"mat-divider")}function it(l,e){if(l&1&&(o(0,"mat-accordion")(1,"mat-expansion-panel",4)(2,"div",5)(3,"div",6),p(4),r(),o(5,"div",7),c(6,Z,5,2,"div",8),o(7,"div")(8,"div",9)(9,"button",10),p(10),r(),o(11,"a"),p(12),r()()()(),c(13,$,7,2,"div",11),r(),c(14,tt,7,0,"div",8),r(),c(15,et,1,0,"mat-divider",8),r()),l&2){let t=e.index,i=e.last,n=d();a(4),s(" ",n.paginated[t]==null?null:n.paginated[t].score," "),a(2),m("ngIf",n.paginated[t]==null?null:n.paginated[t].title),a(3),h("routerLink","/user/",n.paginated[t]==null?null:n.paginated[t].by,""),a(1),s(" ",n.paginated[t]==null?null:n.paginated[t].by.trim()," "),a(2),s(" ",n.getTime(n.paginated[t]==null?null:n.paginated[t].time)," "),a(1),m("ngIf",(n.paginated[t]==null?null:n.paginated[t].type)!="job"),a(1),m("ngIf",!(n.paginated[t]!=null&&n.paginated[t].title)),a(1),m("ngIf",!i)}}var g=class{constructor(e,t,i){this.apiService=e,this.activatedRoute=t,this.router=i,this.topStories=[],this.paginatedData=[],this.paginated=[],this.viewMode="",this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){this.activatedRoute.params.subscribe(e=>{console.log(e),this.viewMode=e.id}),this.getAPI(this.viewMode),console.log("act",this.activatedRoute)}onPageChange(e){this.paginatedData=this.topStories.slice(e.pageIndex*20,(e.pageIndex+1)*20),this.paginated=[],this.getStoryData()}getAPI(e){this.apiService.modeType(e).subscribe(t=>{t=t.map((i,n)=>({id:i,index:n+1})),this.topStories=t,this.paginatedData=this.topStories.slice(0,20),this.getStoryData()})}getStoriesByIDs(e){this.apiService.getStoryById(e).subscribe(t=>{this.paginated.push(t)})}getStoryData(){this.paginatedData.forEach(e=>{this.getStoriesByIDs(e.id)})}getTime(e){var t=new Date().getTime(),i=new Date(e*1e3).getTime();return t-i<=36e5?new Date(t-i).getUTCMinutes()+" minutes":new Date(t-i).getUTCHours()+" hours"}open(e){window.open(e,"_blank")}},Y=g;(()=>{g.\u0275fac=function(t){return new(t||g)(v(X),v(k),v(F))}})(),(()=>{g.\u0275cmp=M({type:g,selectors:[["app-multi-mode-view"]],viewQuery:function(t,i){if(t&1&&D(x,5),t&2){let n;C(n=T())&&(i.paginator=n.first)}},standalone:!0,features:[w],decls:4,vars:3,consts:[[1,"sticky"],["fxLayout","column nowrap","fxLayoutAlign","start stretch",1,"page"],[4,"ngFor","ngForOf"],["paginator","","showFirstLastButtons","true","aria-label","Select page",3,"length","pageSize","page"],["hideToggle","","expanded","true"],[1,"row-center"],["fxFlex","15",1,"m-20"],["fxFlex","","fxFlex.lt-sm","85",1,"story"],[4,"ngIf"],[1,"story-info"],["mat-flat-button","",1,"text-left",3,"routerLink"],["class","m-20c cursor-pointer","fxFlex","15",4,"ngIf"],[1,"story-title"],["target","_blank",1,"story-url","cursor-pointer",3,"click"],["fxFlex","15",1,"m-20c","cursor-pointer"],[3,"routerLink"],[1,"skeleton","skeleton-text"]],template:function(t,i){t&1&&(u(0,"app-heading",0),o(1,"mat-card",1),c(2,it,16,8,"mat-accordion",2),o(3,"mat-paginator",3),_("page",function(f){return i.onPageChange(f)}),r()()),t&2&&(a(2),m("ngForOf",i.paginatedData),a(1),m("length",i.topStories.length)("pageSize",20))},dependencies:[E,b,H,z,L,O,B,q,U,N,Q,j,W,J,G,K,x,A,P,R,V],styles:[".cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.mat-expansion-panel-spacing[_ngcontent-%COMP%]{margin:0!important}"]})})();export{Y as MultiModeViewComponent};
